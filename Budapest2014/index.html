<!doctype html>
<html lang="en">

	<head>
		<meta charset="utf-8">
        <meta name="apple-mobile-web-app-capable" content="yes">
		<title>Solving the Fermat-Weber problem with GeoGebra – a numerical and geometric approach</title>

		<meta name="description" content="
 To find the point the sum of whose distances from the vertexes of a given triangle is the smallest possible. This historical problem from the 17th century  was put by the French mathematician Fermat to the Italian physicist Torricelli. A modern formulation of this problem could be: “To find a best location for a power plant between three cities in such a way that the sum of the connections between the powerplant and the cities is minimal”. Torricelli found several mathematical proofs, which can be nicely presented by GeoGebra. A generalization of the original problem leads to a geometric median – the problem of minimizing the sum of weighted distances.

Finding a geometric median is an optimization problem, which has no analytical solution for more than four points. We will present an interactive numerical solution with GeoGebra  using the Weiszfeld algorithm and the programming language Python. Our GeoGebra Materials calculat the geometric median in real-time, this allows dynamic observations of the solution and the convergence behavior of the Weiszfeld algorithm.
">
		<meta name="author" content="Beat Trachsler / Martin Guggisberg">

		<meta name="apple-mobile-web-app-capable" content="yes" />
		<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />

		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

		<link rel="stylesheet" href="../reveal/css/reveal.min.css">
		<link rel="stylesheet" href="../reveal/css/theme/mw.css" id="theme">

		<!-- For syntax highlighting -->
		<link rel="stylesheet" href="../reveal/lib/css/github.css">

		<!-- If the query includes 'print-pdf', use the PDF print sheet -->
		<script>
			document.write( '<link rel="stylesheet" href="../reveal/css/print/' + ( window.location.search.match( /print-pdf/gi ) ? 'pdf' : 'paper' ) + '.css" type="text/css" media="print">' );
		</script>

		<!--[if lt IE 9]>
		<script src="../reveal/lib/js/html5shiv.js"></script>
		<![endif]-->
	</head>

	<body>

		<div class="reveal">

			<!-- Any section element inside of this container is displayed as a slide -->
			<div class="slides">
				<!-- START -->

				<section>
					
					<h3>
						Solving the <br><b>Fermat-Weber problem</b> 
					</h3>
					<br>
					<h3>a numerical and geometric approach</h3>
					<br>
					<p>
						<small>Beat Trachsler<br>
							Martin Guggisberg
						</small>
					</p>
				</section>

<!-- Introduction -->
<section data-markdown data-separator="---" data-vertical="--" data-background="#222A22">
<script type="text/template">
## Outlook
<br>
<br>

* Introduction
* Mathematical exploration with GeoGebra
* Theory around the Fermat-Weber Problem
* Implementation of the Weiszfeld's algorithm


---
### Fermat's Problem for Torricelli
<br>
*To find the point the sum of whose distances from the vertexes of a given triangle is the smallest possible.*
<br>
<br>
This celebratd problem was put by the French mathematician Fermat to the Italian physicist Torricelli.

<br>
* * * *
<small>[Dorrie, H. (1965). 100 Great problems of elementary mathematics. Dover Publications.](http://cds.cern.ch/record/1551234)</small>

[Dorrie]: http://cds.cern.ch/record/1551234  "Dorrie, H. (1965). 100 Great problems of elementary mathematics. Dover Publications."
--
## Some of many names

The long history and the interdisziplinary application have given several names to the problem and its variations: the Fermat problem, the generalized Fermat problem, the Fermat-Torricelli problem, the Steiner problem, the generalized Steiner problem, the Steiner-Weber problem, the Weber problem, the generalized Weber problem, the Fermat-Weber problem, the one median problem, the median center problem, the spatial median problem, the bivariate median problem, the miniumum aggregate travel point problem
---
#### Minimize the sum of distances
![Fig 1](media/fermat_problem_fig1.png)
---
## Modern formulation

The Weber problem finds the point in a plane which minimises the sum of weighted Euclidean distances to a set of fixed points.

This is interpreted as finding the factory location which minimises the total weighted distances from suppliers and customers, where weights represent relative volumes of interactions, e.g. weight of material to be transported from a supplier, or volume of finished products for a customer.

* * * *
<small>[Drezner, Z., & Hamacher, H. W. (Eds.). (2004). Facility location: applications and theory. Springer.](http://books.google.ch/books?hl=en&lr=&id=sxpcsGN7K1YC)</small>
---
## Modern formulation
![kraftwerk](media/kraftwerk.png)

[Link to GeoGebra Material](http://ulrich-steinmetz.de/geogebra/kraftwerk.html)
--
### Varignon Frame
![Varignon Frame](media/varignonFrame.png)

Varignon proposed a mechanical analogue device which has actually been used in practice
</script>
</section>

<!-- Math Exlploring -->
<section class="weiss" data-markdown data-separator="---" data-vertical="--" data-background="#00AA99" data-background-transition="slide">
<script type="text/template">
# Mathematical Exploration
---
### For n=3 the angle 120° can be observed

<video width="875" height="512" data-autoplay >
	    <source src="media/movies/120degree.mp4" type="video/mp4" /> 
		<source src="media/movies/120degree.webm" type="video/webm" />
		<source src="media/movies/120degree.ogv" type="video/ogg" />	    
		Your browser does not support the <code>video</code> element.
</video>

---
### No angle dependency for more than 3 points

<video width="876" height="512" data-autoplay >
	    <source src="media/movies/morepoints.mp4" type="video/mp4" />
		<source src="media/movies/morepoints.webm" type="video/webm" />
		<source src="media/movies/morepoints.ogv" type="video/ogg" />
		Your browser does not support the <code>video</code> element.
</video>
---
### Fermat Point moves on a orbit
<video width="998" height="712" data-autoplay >
	    <source src="media/movies/orbit.mp4" type="video/mp4" />
		<source src="media/movies/orbit.webm" type="video/webm" />
		<source src="media/movies/orbit.ogv" type="video/ogg" />
		Your browser does not support the <code>video</code> element.
</video>

---
### Fermat Point snap to internal point 
<video width="854" height="634" data-autoplay >
	    <source src="media/movies/snaptopoint.mp4" type="video/mp4" />
	    <source src="media/movies/snaptopoint.webm" type="video/webm" />
	    <source src="media/movies/snaptopoint.ogv" type="video/ogg" />
		Your browser does not support the <code>video</code> element.
</video>


</script>
</section>

<!-- Theory -->
<section class="weiss" data-markdown data-separator="---" data-vertical="--" data-background="#22222" data-background-transition="slide">
<script type="text/template">
# Theory
<br>
<br>
###around the Fermat-Weber Problem
---
### Geometric solution for 3 location

![geometric solution](media/geometricsolution.png)

[Link to Geogebra Material](http://www.geogebratube.org/student/m29199)

---
# Weiszfeld algorithm

---
### Convergence Weiszfeld Algorithm

<video width="1002" height="568" data-autoplay >
        <source src="media/movies/konvergenz.mp4" type="video/mp4" />
		<source src="media/movies/konvergenz.webm" type="video/webm" />
		<source src="media/movies/konvergenz.ogv" type="video/ogg" />
		Your browser does not support the <code>video</code> element.
</video>



---
# Optimality of a Fixed Point

---

Some other stuff
</script>
</section>


<!-- Implementation -->
<section data-markdown data-separator="---" data-vertical="--" data-background="#FF5E99" data-background-transition="slide" >
<script type="text/template" >

#Algorithm
<br>
<br>
###Implementation with the programming language Python
---
#### Programming with Python in GeoGeobra (Beta)
![geometric solution](media/Fermat_Weber_Final.png)
<smaller>[Download Geogebra Sources (Beta)](Fermat_Weber/Fermat_Weber_Final.ggb)</smaller>
---
### Weiszfeld Class
```python
class Weiszfeld(object):
	mypoints = None
	text1 = None
	def __init__(self):
		...
	def drawPoints(self):
		...
	def distance(self,A, B):
		...
	def schwerpunkt(self):
		...
	def median_approx(self,P, points):
		...
	def geometric_median(self,points, epsilon):
		...
	def update(self):
		...
		
```
---
### Initialization of Vertexes


```python
def refresh(self):
	alg.drawSchwerPunkt()
	alg.drawFermatPunkt()
```
** draw points, set action handler **
```python
class Weiszfeld(object):
    def drawPoints(self):
		N = int($Anz.value)
		xcoords = [random.uniform(3, 17) for i in range(N)]
		ycoords = [random.uniform(3, 10) for i in range(N)]
		self.mypoints = [Point(x, y,point_size=6, \
			color=Color(118,175,236), label_visible=True) \
			for x, y in zip(xcoords, ycoords)]
		
		...
		for p in Point.all:
			p.onupdate=refresh
		...
		
```
---
### global Function

```python
def init(self):
	alg.drawPoints()
	alg.drawSchwerPunkt()
	alg.drawFermatPunkt()
```
<br>
<br>

### global initialization

```python
global alg
alg = Weiszfeld()
alg.drawPoints()
alg.update()
$Anz.onupdate=init
```
---
```python
	def median_approx(self,P, points):
		"""
		Return a new approximation to the geometric median 
		of `points` by applying one iteration of Weiszfeld's 
		algorithm to the old appromixation P.
    	"""
		W = x = y = 0.0
		for Q in points:
			d = self.distance(P, Q)
			if d != 0:
				w = 1.0 / d
				W += w
				x += Q[0] * w
				y += Q[1] * w
		return x / W, y / W

```
---
### Interactive Python
<video width="960" height="540" data-autoplay >
	    <source src="media/movies/interaktiv.mp4" type="video/mp4" />
	    <source src="media/movies/interaktiv.webm" type="video/webm" />
	    <source src="media/movies/interaktiv.ogv" type="video/ogg" />
		Your browser does not support the <code>video</code> element.
</video>
---

# Conclusion

---

### Optimization Problems in dynamic Math ....

---

### Using JavaScript
Demo Runs on the web an standard Geogebra4.4
---
### Interactive Demo (JavaScript)
<small>GeoGebra Materials : <a href="http://www.geogebratube.org/material/show/id/66049">http://www.geogebratube.org/material/show/id/66049</a><small>
	<a class="image" href="Fermat_Weber/index.html" target="_blank">
		<img width="800" height="600" src="media/fermat_weber.png" alt="Fermat_Weber">
	</a>

--
## Demo 2
<small>GeoGebra Materials : <a href="http://www.geogebratube.org/student/m66688">http://www.geogebratube.org/student/m66688</a><small>
	<a class="image" href="Fermat_Weber/fermat_europe.html" target="_blank">
		<img width="800" height="600" src="media/fermat_weber_europe.png" alt="Fermat Weber Europe">
	</a>
---
### Thanks for your attention
<video width="972" height="728" data-autoplay >
	    <source src="media/movies/europefp.mp4" type="video/mp4" />
	    <source src="media/movies/europefp.webm" type="video/webm" />
	    <source src="media/movies/europefp.ogv" type="video/ogg" />
		Your browser does not support the <code>video</code> element.
</video>
--
## Finding the Fermat-Weber Point from
* * * * *
###Amsterdam, Berlin, Bordeaux, Brussels, Budapest, Frankfurt, London, Lyon, Marseille, Milan, Paris, Prague, Rome, Turin and Vienna

--
## THE END
<br>
### Questions ?
<br>
### Thanks to Hakim El Hattab / hakim.se for reveal.js
</script>
</section>
			</div>

		</div>

		<script src="../reveal/lib/js/head.min.js"></script>
		<script src="../reveal/js/reveal.min.js"></script>

		<script>

			// Full list of configuration options available here:
			// https://github.com/hakimel/reveal#configuration
			Reveal.initialize({
				controls: true,
				progress: true,
				history: true,
				center: true,
				keyboard: true,
				overview: true,
				slideNumber: true,

				theme: Reveal.getQueryHash().theme, // available themes are in /css/theme
				transition: Reveal.getQueryHash().transition || 'linear', // default/cube/page/concave/zoom/linear/fade/none

				// Parallax scrolling
				// parallaxBackgroundImage: 'https://s3.amazonaws.com/hakim-static/reveal-js/reveal-parallax-1.jpg',
				parallaxBackgroundSize: '2100px 900px',

				// Optional libraries used to extend on reveal
				dependencies: [
					{ src: '../reveal/lib/js/classList.js', condition: function() { return !document.body.classList; } },
					{ src: '../reveal/plugin/markdown/marked.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
					{ src: '../reveal/plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
					{ src: '../reveal/plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } },
					{ src: '../reveal/plugin/zoom-js/zoom.js', async: true, condition: function() { return !!document.body.classList; } },
					{ src: '../reveal/plugin/notes/notes.js', async: true, condition: function() { return !!document.body.classList; } }
				]
			});

		</script>

	</body>
</html>
